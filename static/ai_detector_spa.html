<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>AI Images Detector</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Prata:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <!-- ������ -->
  <nav id="navbar">
    <div>
      <img src="/static/img/logo.png" class="logo">
      <a href="#" data-target="home">Home</a>
      <a href="#" data-target="detect">Detect</a>
      <a href="#" data-target="about-section">About</a>
    </div>
  </nav>

  <!-- ���� -->
  <div class="background"></div>

  <!-- ҳ���������� -->
  <div class="main-content">
    <!-- ��ҳ���� -->
    <section id="home" class="content-section active">
      <div class="container">
        <div class="left">
          <h1>AI Images Detector</h1>
          <p>
            This page is used for AI image detection. You can upload images to see if they're fake or real.<br>
            Can you distinguish whether the images on the right are generated by AI or human?<br>
            Push the button below, let's get started.<br>
          </p>
          <button class="start-button">Start</button>
        </div>
        <div class="right">
          <div class="image-grid">
            <img src="/static/img/home_page/img1.jpg" alt="Image 1">
            <img src="/static/img/home_page/img2.jpg" alt="Image 2">
            <img src="/static/img/home_page/img3.jpg" alt="Image 3">
            <img src="/static/img/home_page/img4.jpg" alt="Image 4">
            <img src="/static/img/home_page/img5.jpg" alt="Image 5">
            <img src="/static/img/home_page/img6.jpg" alt="Image 6">
            <img src="/static/img/home_page/img7.jpg" alt="Image 7">
            <img src="/static/img/home_page/img8.jpg" alt="Image 8">
            <img src="/static/img/home_page/img9.jpg" alt="Image 9">
          </div>
        </div>
      </div>
    </section>

    <!-- ���ҳ���� -->
    <section id="detect" class="content-section">
      <div class="container">
        <div class="box">
          <div class="upload-box">
            <p class="upload-title">Upload your image</p>

            <div class="upload-area" id="upload-area">
              <p>Click here to upload image</p>
              <input type="file" id="file-input" style="display: none" />
            </div>
          </div>
          <img id="preview-image" />
        </div>
        <div class="box">
          <div id="detect-box" class="detect-box">
            <p id="detect-text" class="detect-text">Detect</p>
            <div id="loading-spinner" class="spinner" style="display: none;"></div>
          </div>
          <!-- detect result display -->
          <p id="detect-result" class="detect-result"></p>
        </div>
      </div>
    </section>

    <!-- ����ҳ���� -->
    <section id="about-section" class="content-section">
      <div class="arrow left-arrow">&#8592;</div>
      <div class="arrow right-arrow">&#8594;</div>

      <div id="about-content" class="about-slide">
        <img src="/static/img/about/head.jpg" alt="Author" class="author-image" />
        <p class="author-description"> 
          Hi this is flower<br>
          There are some informations about this page<br>
        </p>
      </div>

      <div id="about-summary" class="about-slide">
        <div class="summary">
          <h1>Introduction</h1>
          <p>
            With the rapid development of generative adversarial networks and the generative diffusion models,<br>
            the quality of AI-generated images has been extremely high which leads to a challenge, if human eyes can<br>
            distinguish the AI-generated images from real images. Nowadays, there are so many generative models<br>
            available online for people to use. It is so easy to create an image, and the images could be used in<br>
            many ways, whether they are used in good ways or not.So training a model that can help people distinguish<br>
            between real and fake images is also something that shouldn not be ignored.
          </p>
          <p class="source-note">
            This website is designed to help people identify AI-generated images. The model was trained on a dataset<br>
            provided by <a href="https://arxiv.org/abs/1912.11035" target="_blank">CNN-generated images are surprisingly easy to spot... for now</a>
            incorporating spatial-domain,<br>
            frequency-domain features of images and the image semantic information.Based on this foundation, it was trained<br>
            and evaluated, achieving the accuracy shown in the figure below across various generative models.<br>
            The test set was provided by:<a href="https://arxiv.org/abs/2311.12397" target="_blank">PatchCraft: Exploring Texture Patch for Efficient AI-generated Image Detection</a>
          </p>
          <p>
            It is important to note that the model's results are not 100% accurate, and the content of this website is for reference only.
          </p>
        </div>
      </div>

      <div id="about-details" class="about-slide">
        <div class="container1">
          <div class="left">
            <h1>Accuracy</h1>
            <p>The figure on the right shows the model's performance across different generative models.</p>
          </div>
          <div class="right">
            <img src="/static/img/about/Figure_1.png" alt="Project" />
          </div>
        </div>
      </div>  

    </section>

  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("navbar").classList.add("show");
  
      const links = document.querySelectorAll("nav a");
      const sections = document.querySelectorAll(".content-section");
  
      // ��������ת
      links.forEach(link => {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          const targetId = this.getAttribute("data-target");
  
          sections.forEach(sec => {
            sec.classList.remove("active");
          });
  
          setTimeout(() => {
            document.getElementById(targetId).classList.add("active");
          }, 100);
        });
      });
  
      // Start Button
      const startButton = document.querySelector(".start-button");
      if (startButton) {
        startButton.addEventListener("click", function () {
          const home = document.getElementById("home");
          const detect = document.getElementById("detect");
  
          home.classList.remove("active");
  
          setTimeout(() => {
            detect.classList.add("active");
          }, 500);
        });
      }
  
      // About Page
      const slides = document.querySelectorAll(".about-slide");
      const leftArrow = document.querySelector(".left-arrow");
      const rightArrow = document.querySelector(".right-arrow");
      let current = 0;
  
      function showSlide(index) {
        slides.forEach((slide, i) => {
          slide.classList.toggle("active", i === index);
        });
      }
  
      leftArrow.addEventListener("click", () => {
        current = (current - 1 + slides.length) % slides.length;
        showSlide(current);
      });
  
      rightArrow.addEventListener("click", () => {
        current = (current + 1) % slides.length;
        showSlide(current);
      });
  
      showSlide(current); // ��ʼ����ʾ
    });

    // �ϴ�ͼƬ
    const uploadArea = document.getElementById("upload-area");
    const fileInput = document.getElementById("file-input");
    const previewImage = document.getElementById("preview-image");
    let uploadedFile = null;
  
    uploadArea.addEventListener("click", () => {
      fileInput.click();
    });
  
    fileInput.addEventListener("change", () => {
      const file = fileInput.files[0];
      if (file) {
        uploadedFile = file;

        const reader = new FileReader();
        reader.onload = (e) => {
          previewImage.src = e.target.result;
          previewImage.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    });

    // push detect button, transmit image_path to route:/detect
    document.getElementById("detect-box").addEventListener("click", () => {
      const detectBox = document.getElementById("detect-box");
      const detectText = detectBox.querySelector(".detect-text");
      const spinner = detectBox.querySelector(".spinner");
      const resultDisplay = document.getElementById("detect-result");

      if (!uploadedFile){
        resultDisplay.innerText = "Please upload an image first";
        return;
      }

      // display loading animation, and hide text
      detectText.style.display = "none";
      spinner.style.display = "block";
      resultDisplay.innerText = "";

      const formData = new FormData();
      formData.append("image", uploadedFile);

      fetch("https://ai-detector-app-production.up.railway.app/detect", {
        method: "POST",
        body: formData
      })
        .then((res) => res.json())
        .then((data) => {
          resultDisplay.innerText = `The AI-generated probability is ${data.probability}%`;
        })
        .catch((err) => {
          resultDisplay.innerText = "Error during detection";
          console.error("Detection failed", err);
        })
        .finally(() => {
          spinner.style.display = "none";
          detectText.style.display = "block";
        })
    });
    
  </script>
</body>
</html>
